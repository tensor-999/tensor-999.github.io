<!DOCTYPE html>
<html lang="ko">
<head>
	<meta charset="UTF-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
	<title>Paradise</title>
	<link rel="stylesheet" href="style.css" />
</head>
<body>
<h1>역극백업</h1>
<h3>마스토돈 역극을 백업할 수 있는 사이트입니다.</h3>
<ul>
	<h2>외부인 사용 가능</h2>
	<li><a href="./personal.html">개인 역극백업</a></li>
	<h2>커뮤니티 전용(2인 백업)</h2>
	<li><a href="./paradise.html">낙원존재론</a></li>
	<li><a href="./paradise-RE.html">낙원존재론:리부트</a></li>
	<li><a href="./paradise-SF.html">낙원존재론:SF군부</a></li>
</ul>
</body>
<script>
	document.addEventListener("DOMContentLoaded", async () => {
		let password = "";
		try {
			const res = await fetch("./config.json");
			const config = await res.json();
			password = config.PASSWORD;
		} catch (e) {
			console.error("config.json 읽기 실패", e);
			return;
		}

		const protectedLinks = document.querySelectorAll('a[href^="./paradise"]');
		protectedLinks.forEach(link => {
			link.addEventListener("click", (e) => {
				e.preventDefault();
				const userInput = prompt("비밀번호를 입력하세요: ");
				if (userInput === password) {
					sessionStorage.setItem("authenticated", "true");
					window.location.href = link.href;
				} else if (userInput == null) {
					return;
				} else {
					alert("비밀번호가 틀렸습니다!");
				}
			});
		});
	});
</script>
</html>